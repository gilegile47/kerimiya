/*
 * Keremiya v5 Live Search JS
 */
jQuery(document).ready(function(a){var b=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),c=!1,d=!0;a("#s").on("input",function(){var e=this.value;b(function(){return e.length<=2?(a(sL10n.area).hide(),void a(sL10n.button).find("span").removeClass("icon-spinner1").removeClass("animate-spin")):void(c||(c=!0,a(sL10n.button).find("span").addClass("icon-spinner1").addClass("animate-spin"),a(sL10n.area).find("ul").addClass("process").addClass("noselect"),a.ajax({type:"GET",url:sL10n.api,data:"keyword="+e+"&nonce="+sL10n.nonce,dataType:"json",success:function(b){if(b.error)return void a(sL10n.area).hide();a(sL10n.area).show();var c='<span class="icon-search-1">'+e+"</span>",d=sL10n.more.replace("%s",c),f='<a class="more" href="javascript:;" onclick="document.getElementById(\'search-form\').submit();">'+d+"</a>",g=[];a.each(b,function(a,b){name="",date="",imdb="",b.extra.date!==!1&&(date="<span class='release'>("+b.extra.date+")</span>"),b.extra.names!==!1&&(name=b.extra.names),b.extra.imdb!==!1&&(imdb="<div class='imdb'><span class='icon-star'>IMDB: "+b.extra.imdb+"</span></div>"),g.push("<li id='"+a+"'><a href='"+b.url+"' class='clearfix'><div class='poster'><img src='"+b.img+"' /></div><div class='title'>"+b.title+"</div><div class='other-name'>"+name+date+"</div>"+imdb+"</a></li>")}),a(sL10n.area).html("<ul>"+g.join("")+f+"</ul>")},complete:function(){c=!1,d=!1,a(sL10n.button).find("span").removeClass("icon-spinner1").removeClass("animate-spin"),a(sL10n.area).find("ul").removeClass("process").removeClass("noselect")}})))},500)}),a(document).on("keypress","#search-form",function(a){if(d)return 13!=a.keyCode}),a(document).click(function(){a(event.target);0==a(event.target).closest("#s").length?a(sL10n.area).hide():a(sL10n.area).show()})});